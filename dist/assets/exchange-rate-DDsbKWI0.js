import{r as h,c as p,e as l,w as g,f as d,W as f,h as y,d as i}from"./index-BffsZACv.js";import{p as _}from"./date-CHAm-pjJ.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S=e=>h({url:"/admin/currency/list",method:"post",data:e}),b=e=>h({url:"/admin/currency/save",method:"post",data:e}),T=e=>h({url:"/admin/currency/delete?id="+e,method:"post"}),w={data(){return{rowId:null,form:{},search:{},loading:!0,query:{},page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:210,searchShow:!0,searchMenuSpan:6,span:24,tip:!1,dialogWidth:"30%",addBtn:!0,editBtn:!1,delBtn:!0,column:[{label:"汇率",prop:"rate",rules:[{required:!0,message:"请输入汇率",trigger:"blur"}]},{label:"汇率类型",prop:"currency",type:"select",rules:[{required:!0,message:"请选择汇率类型",trigger:"change"}],value:1,dicData:[{value:1,label:"USD"}]},{label:"汇率日期",prop:"addTime",search:!0,pickerOptions:_,rules:[{required:!0,message:"请选择汇率日期",trigger:"change"}],formatter:e=>e.addTime}]},data:[],showEditPop:!1}},methods:{searchReset(){this.search={},this.query={},this.page.currentPage=1,this.page.pageSize=10,this.onLoad(this.page)},searchChange(e,a){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),a()},currentChange(e){this.page.currentPage=e},sizeChange(e){this.page.pageSize=e},refreshChange(){this.onLoad(this.page,this.query)},onLoad(e,a={}){this.loading=!0;const r={current:e.currentPage,size:e.pageSize,...Object.assign(a,this.query)};r.addTime&&r.addTime.length&&(r.beginTime=r.addTime[0],r.endTime=r.addTime[1]),S(r).then(n=>{this.page.total=Number(n.total||0),this.data=n.data,this.loading=!1})},beforeOpen(e,a){this.form.addTime=f().format("YYYY-MM-DD HH:mm:ss"),console.log(this.form),e()},rowSave(e,a,r){b(e).then(()=>{a(),this.onLoad(this.page),this.$message({type:"success",message:"操作成功!"})},n=>{r()})},rowDel(e){this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>T({id:e.id})).then(()=>{this.onLoad(this.page),this.$message({type:"success",message:"操作成功!"})})}}},v={class:"basic-container"},V={slot:"addTimeSearch","slot-scope":"{}"},R={slot:"rateForm","slot-scope":"{}"},z={slot:"addTimeForm","slot-scope":"{}"};function L(e,a,r,n,t,o){const m=d("el-date-picker"),u=d("el-input-number"),c=d("avue-crud");return y(),p("div",v,[l(c,{option:t.option,"table-loading":t.loading,data:t.data,ref:"crud",modelValue:t.form,"onUpdate:modelValue":a[3]||(a[3]=s=>t.form=s),search:t.search,page:t.page,onRowSave:o.rowSave,onRowDel:o.rowDel,"before-open":o.beforeOpen,onSearchChange:o.searchChange,onSearchReset:o.searchReset,onCurrentChange:o.currentChange,onSizeChange:o.sizeChange,onRefreshChange:o.refreshChange,onOnLoad:o.onLoad},{default:g(()=>[i("template",V,[l(m,{modelValue:t.search.addTime,"onUpdate:modelValue":a[0]||(a[0]=s=>t.search.addTime=s),valueFormat:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],size:"small","start-placeholder":"起始日期","end-placeholder":"结束日期",type:"daterange"},null,8,["modelValue"])]),i("template",R,[l(u,{modelValue:t.form.rate,"onUpdate:modelValue":a[1]||(a[1]=s=>t.form.rate=s),precision:4,style:{width:"100%"},controls:!1,min:0,placeholder:"请输入汇率"},null,8,["modelValue"])]),i("template",z,[l(m,{modelValue:t.form.addTime,"onUpdate:modelValue":a[2]||(a[2]=s=>t.form.addTime=s),type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择日期"},null,8,["modelValue"])])]),_:1},8,["option","table-loading","data","modelValue","search","page","onRowSave","onRowDel","before-open","onSearchChange","onSearchReset","onCurrentChange","onSizeChange","onRefreshChange","onOnLoad"])])}const B=C(w,[["render",L]]);export{B as default};
