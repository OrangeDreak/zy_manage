import{a as m,l as S,m as L,w as l,d as a,e,f as r,k as p,i as y,q as x,h as A,E as g,u as M,o as H,b as W,c as E,t as i,F as j,n as G,g as J,p as K,s as Q,v as X}from"./index-BffsZACv.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Y}from"./CommonHeader-Cy0YNS6M.js";import"./lang-Dz0RF1XV.js";const Z={class:"parse-area"},ee={class:"parse-tip"},le={class:"dialog-footer"},te={__name:"AddressForm",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(F,{emit:T}){const w=F,h=T,d=m(!1);S(()=>w.modelValue,c=>{d.value=c}),S(()=>d.value,c=>{h("update:modelValue",c)});const b=m(null),V=m(!1),k=m(""),n=m({name:"",address:"",phone:"",country:"",zipCode:""}),q={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}],zipCode:[{required:!0,message:"请输入邮编",trigger:"blur"},{pattern:/^\d{6}$/,message:"请输入正确的邮政编码",trigger:"blur"}]};S(k,async c=>{if(c)try{setTimeout(()=>{const o={name:"张三",address:"北京市朝阳区xxx街道xxx号",phone:"13800138000",country:"中国",zipCode:"100000"};n.value=o,g.success("地址解析成功")},500)}catch(o){console.error("地址解析失败:",o),g.error("地址解析失败")}});const z=async()=>{b.value&&await b.value.validate(async c=>{if(c){V.value=!0;try{await new Promise(o=>setTimeout(o,500)),h("submit",n.value),g.success("保存成功"),d.value=!1}catch(o){console.error("保存失败:",o),g.error("保存失败")}finally{V.value=!1}}})};return(c,o)=>{const _=r("el-input"),t=r("el-icon"),u=r("el-tooltip"),v=r("el-form-item"),U=r("el-col"),$=r("el-row"),I=r("el-form"),C=r("el-button"),N=r("el-dialog");return A(),L(N,{modelValue:d.value,"onUpdate:modelValue":o[7]||(o[7]=s=>d.value=s),title:"新增/修改用户地址",width:"800px","close-on-click-modal":!1},{footer:l(()=>[a("span",le,[e(C,{onClick:o[6]||(o[6]=s=>d.value=!1)},{default:l(()=>o[9]||(o[9]=[p("取消")])),_:1}),e(C,{type:"primary",onClick:z,loading:V.value},{default:l(()=>o[10]||(o[10]=[p(" 确定 ")])),_:1},8,["loading"])])]),default:l(()=>[a("div",Z,[e(_,{modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=s=>k.value=s),type:"textarea",rows:3,placeholder:"请输入完整地址，系统将自动解析"},null,8,["modelValue"]),a("div",ee,[o[8]||(o[8]=p(" 地址智能解析 ")),e(u,{content:"支持粘贴完整地址进行智能解析",placement:"top"},{default:l(()=>[e(t,null,{default:l(()=>[e(y(x))]),_:1})]),_:1})])]),e(I,{ref_key:"formRef",ref:b,model:n.value,rules:q,"label-width":"80px",class:"address-form"},{default:l(()=>[e($,{gutter:20},{default:l(()=>[e(U,{span:12},{default:l(()=>[e(v,{label:"姓名",prop:"name"},{default:l(()=>[e(_,{modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=s=>n.value.name=s),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),e(v,{label:"地址",prop:"address"},{default:l(()=>[e(_,{modelValue:n.value.address,"onUpdate:modelValue":o[2]||(o[2]=s=>n.value.address=s),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1}),e(v,{label:"电话",prop:"phone"},{default:l(()=>[e(_,{modelValue:n.value.phone,"onUpdate:modelValue":o[3]||(o[3]=s=>n.value.phone=s),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1}),e(U,{span:12},{default:l(()=>[e(v,{label:"国家",prop:"country"},{default:l(()=>[e(_,{modelValue:n.value.country,"onUpdate:modelValue":o[4]||(o[4]=s=>n.value.country=s),placeholder:"请选择国家"},{append:l(()=>[e(u,{content:"收货地址所在国家",placement:"top"},{default:l(()=>[e(t,null,{default:l(()=>[e(y(x))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"邮编",prop:"zipCode"},{default:l(()=>[e(_,{modelValue:n.value.zipCode,"onUpdate:modelValue":o[5]||(o[5]=s=>n.value.zipCode=s),placeholder:"请输入邮政编码"},{append:l(()=>[e(u,{content:"收货地址邮政编码",placement:"top"},{default:l(()=>[e(t,null,{default:l(()=>[e(y(x))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},oe=P(te,[["__scopeId","data-v-8c0f47e4"]]),se={class:"add-transfer"},ae={class:"content"},re={class:"page-header"},de={class:"title"},ne={class:"section warehouse-section"},ue={class:"section-title"},ie={class:"section-content"},pe={class:"section-tip"},me={class:"section"},ce={class:"section-title"},fe={class:"section-content"},_e={class:"recent-address"},ve={class:"address-text"},ge={class:"section"},he={class:"section-title"},Ve={class:"section-content"},ye={class:"add-express"},be={class:"submit-section"},$e={__name:"AddTransferOrder",setup(F){J(),M();const T=m(""),w=m(!1),h=m(!1),d=m({customCode:"",recentAddress:"",expressItems:[{expressNo:"",value:"",images:[]}]});m(""),m("https://placeholder.com/32");const b=()=>{const t=new Date;T.value=t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-")};let V=null;H(()=>{b(),V=setInterval(b,1e3)}),W(()=>{V&&clearInterval(V)});const k=()=>{g.info("请联系在线客服获取仓库地址")},n=()=>{h.value=!0},q=t=>{d.value.recentAddress=`${t.name}, ${t.address}, ${t.phone}`,h.value=!1},z=()=>{d.value.expressItems.push({expressNo:"",value:"",images:[]})},c=t=>{d.value.expressItems.splice(t,1)},o=(t,u)=>{g.success("图片上传功能待实现")},_=async()=>{w.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),g.success("提交成功")}catch(t){console.error("提交失败:",t),g.error("提交失败")}finally{w.value=!1}};return(t,u)=>{const v=r("el-link"),U=r("el-alert"),$=r("el-icon"),I=r("el-tooltip"),C=r("el-input"),N=r("el-form-item"),s=r("el-button"),R=r("el-form"),D=r("el-upload");return A(),E("div",se,[e(Y),a("div",ae,[a("div",re,[a("div",de,i(t.$t("transfer.addOrder.title")),1),e(v,{type:"primary",onClick:u[0]||(u[0]=f=>t.$router.push("/transfer-list"))},{default:l(()=>[p(i(t.$t("transfer.addOrder.backToList")),1)]),_:1})]),a("div",ne,[a("div",ue,i(t.$t("transfer.addOrder.warehouse.title")),1),a("div",ie,[e(v,{type:"primary",onClick:k},{default:l(()=>[p(i(t.$t("transfer.addOrder.warehouse.getAddress")),1)]),_:1})]),a("div",pe,[e(U,{type:"warning",closable:!1,"show-icon":""},{default:l(()=>[p(i(t.$t("transfer.addOrder.warehouse.tip")),1)]),_:1})])]),a("div",me,[a("div",ce,i(t.$t("transfer.addOrder.form.title")),1),a("div",fe,[e(R,{model:d.value,"label-width":"120px"},{default:l(()=>[e(N,{label:t.$t("transfer.addOrder.form.customCode"),required:""},{default:l(()=>[e(C,{modelValue:d.value.customCode,"onUpdate:modelValue":u[1]||(u[1]=f=>d.value.customCode=f),placeholder:t.$t("transfer.addOrder.form.customCodePlaceholder"),class:"custom-code-input"},{append:l(()=>[e(I,{content:"编码说明",placement:"top"},{default:l(()=>[e($,null,{default:l(()=>[e(y(x))]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(N,{label:t.$t("transfer.addOrder.form.recentAddress")},{default:l(()=>[a("div",_e,[a("span",ve,i(d.value.recentAddress||t.$t("transfer.addOrder.form.noAddress")),1),e(s,{type:"primary",link:"",onClick:n},{default:l(()=>[p(i(t.$t("transfer.addOrder.form.addAddress"))+" ",1),e(I,{content:"地址说明",placement:"top"},{default:l(()=>[e($,{class:"address-help"},{default:l(()=>[e(y(x))]),_:1})]),_:1})]),_:1})])]),_:1},8,["label"])]),_:1},8,["model"])])]),a("div",ge,[a("div",he,i(t.$t("transfer.addOrder.form.expressTitle")),1),a("div",Ve,[(A(!0),E(j,null,G(d.value.expressItems,(f,B)=>(A(),E("div",{key:B,class:"express-item"},[e(C,{modelValue:f.expressNo,"onUpdate:modelValue":O=>f.expressNo=O,placeholder:t.$t("transfer.addOrder.form.expressNo")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(C,{modelValue:f.value,"onUpdate:modelValue":O=>f.value=O,placeholder:t.$t("transfer.addOrder.form.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(D,{class:"upload-area",action:"#","auto-upload":!1,"show-file-list":!1,onChange:O=>o()},{default:l(()=>[e(s,{type:"primary",plain:""},{default:l(()=>[e($,null,{default:l(()=>[e(y(Q))]),_:1}),p(" "+i(t.$t("transfer.addOrder.form.photo")),1)]),_:1})]),_:2},1032,["onChange"]),d.value.expressItems.length>1?(A(),L(s,{key:0,type:"danger",link:"",onClick:O=>c(B)},{default:l(()=>u[3]||(u[3]=[p(" 删除 ")])),_:2},1032,["onClick"])):K("",!0)]))),128)),a("div",ye,[e(s,{type:"primary",plain:"",class:"add-btn",onClick:z},{default:l(()=>[e($,null,{default:l(()=>[e(y(X))]),_:1}),p(" "+i(t.$t("transfer.addOrder.form.addExpress")),1)]),_:1})])])]),a("div",be,[e(s,{type:"primary",loading:w.value,onClick:_},{default:l(()=>[p(i(t.$t("transfer.addOrder.form.submit")),1)]),_:1},8,["loading"])])]),e(oe,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=f=>h.value=f),onSubmit:q},null,8,["modelValue"])])}}},Ae=P($e,[["__scopeId","data-v-8a76bd0a"]]);export{Ae as default};
