import{r as g,c as v,e as c,w as o,f as l,h as m,H as B,k as y,d as s,t as u,m as z}from"./index-BiHybe5R.js";import{n as L,c as d}from"./commonUtil-265gjw8e.js";/* empty css                    *//* empty css              */import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x=e=>g({url:"/admin/user/customerUserList",method:"post",data:e}),k=e=>g({url:"/admin/user/freeze",method:"post",data:e}),O={name:"UserList",data(){return{notAvatar:L,search:{},data:[],loading:!0,query:{},page:{pageSize:10,currentPage:1,total:0},option:{calcHeight:210,searchShow:!0,searchMenuSpan:8,searchSpan:8,searchLabelWidth:120,searchMenuPosition:"right",menuWidth:150,span:24,addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"用户ID",prop:"id",search:!0,editDisplay:!1},{label:"昵称",prop:"nickname",hide:!0},{label:"手机号",prop:"mobile",hide:!0},{label:"邮箱",prop:"email",hide:!0},{label:"用户信息",prop:"info",width:300},{label:"加入时间",prop:"gmtCreate"},{label:"最近消费时间",prop:"lastOrderTime",width:100},{label:"最近消费金额",prop:"lastOrderGmv",width:100,html:!0,formatter:e=>d(e.lastOrderGmv,{sign:"￥"})},{label:"消费次数",prop:"orderCnt"},{label:"累计消费金额",prop:"orderGmv",width:100,html:!0,formatter:e=>d(e.orderGmv,{sign:"￥"})},{label:"账户余额",prop:"availableBalance",width:100,html:!0,formatter:e=>d(e.userBalanceVO.availableBalance,{sign:"￥"})},{label:"欠款",prop:"debtBalance",width:100,html:!0,formatter:e=>d(e.userBalanceVO.debtBalance,{sign:"￥"})}]}}},computed:{},methods:{searchChange(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},searchReset(){this.search={},this.query={},this.onLoad(this.page)},refreshChange(){this.onLoad(this.page,this.query)},currentChange(e){this.page.currentPage=e},sizeChange(e){this.page.pageSize=e},onLoad(e,t={}){this.loading=!0;const h={current:e.currentPage,size:e.pageSize,...Object.assign(t,this.query)};x(h).then(i=>{this.page.total=Number(i.total||0),this.data=i.data,this.loading=!1})},toDetail(e){this.$router.push(`/userDetail/index?id=${e}`)},onFrozenThaw(e){const{status:t,id:h}=e;this.$confirm(`是否确认${t?"解冻":"冻结"}该用户？`,{confirmButtonText:"确认",cancelButtonText:"我再想想",type:"warning"}).then(async()=>{const i={userId:h,status:t===1?0:1},{data:a={}}=await k(i);this.onLoad(this.page),this.$message.success("操作成功!")}).catch(()=>{})},finish(){this.onLoad(this.page)}}},V={class:"basic-container"},q={class:"flex-row"},D=["src"],R={class:"user-list_info"};function T(e,t,h,i,a,n){const f=l("el-input"),_=l("el-form-item"),b=l("el-form"),w=l("el-button"),C=l("avue-crud");return m(),v("div",V,[c(C,{option:a.option,"table-loading":a.loading,data:a.data,search:a.search,page:a.page,onSearchChange:n.searchChange,onSearchReset:n.searchReset,onCurrentChange:n.currentChange,onSizeChange:n.sizeChange,onRefreshChange:n.refreshChange,onOnLoad:n.onLoad},{search:o(({size:r})=>[c(b,{model:a.search,size:r,"label-width":"120px"},{default:o(()=>[(m(),z(_,{label:"账户信息:",key:1},{default:o(()=>[c(f,{modelValue:a.search.keyword,"onUpdate:modelValue":t[0]||(t[0]=p=>a.search.keyword=p),placeholder:"请输入用户名或邮箱",filterable:"",clearable:"",style:{width:"30%"}},null,8,["modelValue"])]),_:1}))]),_:2},1032,["model","size"])]),info:o(r=>[s("div",q,[s("img",{src:r.row.avatar||a.notAvatar,class:"user-list_avatar"},null,8,D),s("div",R,[s("div",null,u(r.row.nickname),1),s("div",null,"手机号："+u(r.row.mobile),1),s("div",null,"邮箱："+u(r.row.email),1)])])]),menu:o((r,p)=>[c(w,{icon:"el-icon-view",type:"text",size:"small",onClick:B(P=>n.toDetail(r.row.id),["stop"])},{default:o(()=>t[1]||(t[1]=[y("详情")])),_:2},1032,["onClick"])]),_:1},8,["option","table-loading","data","search","page","onSearchChange","onSearchReset","onCurrentChange","onSizeChange","onRefreshChange","onOnLoad"])])}const A=S(O,[["render",T]]);export{A as default};
