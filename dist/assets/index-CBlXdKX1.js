import{a as b,b as v,c as f,d as S}from"./article-C7hUI4M7.js";/* empty css                    *//* empty css              */import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as w,e as i,w as a,f as g,h as l,k as s,m as h,p as C}from"./index-De_Ipbpn.js";const D={components:{},data(){return{search:{},data:[],tabsList:[],loading:!1,query:{},page:{pageSize:10,currentPage:1,total:0},option:{border:!0,searchMenuSpan:6,searchMenuPosition:"right",menuWidth:250,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"文章名称",prop:"name",search:!0,searchOrder:3},{label:"栏目名称",prop:"articleCategoryId",search:!0,type:"select",props:{label:"name",value:"id"},searchOrder:1,dicData:[],formatter:e=>e.articleCategoryName},{label:"创建人",prop:"creatorName"},{label:"语言",prop:"languageEnName"},{label:"序号",prop:"sort"},{label:"创建时间",prop:"gmtCreate",type:"daterange",searchRange:!0,format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss",defaultTime:["00:00:00","23:59:59"],formatter:e=>e.gmtCreate},{label:"状态",prop:"status",search:!0,searchOrder:2,type:"select",dicData:[{label:"未发布",value:0},{label:"已上线",value:1},{label:"已下线",value:2}]}]},reasonList:[]}},created(){S().then(e=>{this.option.column[1].dicData=e.data||[]})},methods:{onDown(e){f({id:e,status:2}).then(()=>{this.refreshChange(),this.$message.success("文章已下线")})},onLine(e){f({id:e,status:1}).then(()=>{this.refreshChange(),this.$message.success("文章已上线")})},onRelease(e){f({id:e,status:1}).then(()=>{this.refreshChange(),this.$message.success("文章已上线")})},createArticle(){this.$router.push("/article/detail")},toDetail(e){this.$router.push(`/article/view?id=${e}`)},onEdit(e){this.$router.push(`/article/detail?id=${e}`)},searchChange(e,t){e.gmtCreateTime&&e.gmtCreateTime.length?(this.search.startGmtCreateTime=val[0],this.search.endGmtCreateTime=val[1]):(this.search.startGmtCreateTime=null,this.search.endGmtCreateTime=null),e.gmtPaySuccess&&e.gmtPaySuccess.length?(this.search.startPaySuccessTime=val[0],this.search.endPaySuccessTime=val[1]):(this.search.startPaySuccessTime=null,this.search.endPaySuccessTime=null),this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},searchReset(){this.search.orderStatus="0",this.query={orderStatus:"0"},this.onLoad(this.page,this.query)},refreshChange(){this.onLoad(this.page,this.query)},currentChange(e){this.page.currentPage=e},sizeChange(e){this.page.pageSize=e},onLoad(e,t={}){this.loading=!0;const y={current:e.currentPage,size:e.pageSize,...Object.assign(t,this.query)};v(y).then(m=>{m&&(this.page.total=m.total||0,this.data=m.data||[])}).finally(()=>{this.loading=!1})},onDel(e){b({id:e}).then(()=>{this.$message.success("删除成功"),this.page.currentPage=1,this.refreshChange()})}}},L={class:"basic-container"};function P(e,t,y,m,u,r){const o=g("el-button"),d=g("el-popconfirm"),p=g("el-tag"),k=g("avue-crud");return l(),w("div",L,[i(k,{option:u.option,"table-loading":u.loading,data:u.data,search:u.search,page:u.page,rowKey:"orderId",onSearchChange:r.searchChange,onSearchReset:r.searchReset,onCurrentChange:r.currentChange,onSizeChange:r.sizeChange,onRefreshChange:r.refreshChange,onOnLoad:r.onLoad},{menu:a((n,T)=>[i(o,{type:"primary",link:"",onClick:c=>r.toDetail(n.row.id)},{default:a(()=>t[0]||(t[0]=[s("查看")])),_:2},1032,["onClick"]),i(o,{type:"primary",link:"",style:{margin:"0 7px"},onClick:c=>r.onEdit(n.row.id)},{default:a(()=>t[1]||(t[1]=[s("编辑")])),_:2},1032,["onClick"]),n.row.status==0?(l(),h(d,{key:0,title:"确认发布吗？",onConfirm:c=>r.onRelease(n.row.id)},{reference:a(()=>[i(o,{style:{margin:"0 7px"},type:"primary",link:""},{default:a(()=>t[2]||(t[2]=[s("发布")])),_:1})]),_:2},1032,["onConfirm"])):C("",!0),n.row.status===1?(l(),h(d,{key:1,title:"确认下线吗？",onConfirm:c=>r.onDown(n.row.id)},{reference:a(()=>[i(o,{style:{margin:"0 7px"},type:"primary",link:""},{default:a(()=>t[3]||(t[3]=[s("下线")])),_:1})]),_:2},1032,["onConfirm"])):C("",!0),n.row.status==2?(l(),h(d,{key:2,title:"确认上线吗？",onConfirm:c=>r.onLine(n.row.id)},{reference:a(()=>[i(o,{style:{margin:"0 7px"},type:"primary",link:""},{default:a(()=>t[4]||(t[4]=[s("上线")])),_:1})]),_:2},1032,["onConfirm"])):C("",!0),i(d,{title:"确定删除该文章吗？",onConfirm:c=>r.onDel(n.row.id)},{reference:a(()=>[i(o,{type:"primary",link:""},{default:a(()=>t[5]||(t[5]=[s("删除")])),_:1})]),_:2},1032,["onConfirm"])]),status:a(n=>[n.row.status===1?(l(),h(p,{key:0,type:"success"},{default:a(()=>t[6]||(t[6]=[s("已上线")])),_:1})):n.row.status===0?(l(),h(p,{key:1,type:"danger"},{default:a(()=>t[7]||(t[7]=[s("未发布")])),_:1})):(l(),h(p,{key:2,type:"info"},{default:a(()=>t[8]||(t[8]=[s("已下线")])),_:1}))]),"menu-left":a(n=>[i(o,{type:"primary",size:"small",icon:"el-icon-plus",onClick:r.createArticle},{default:a(()=>t[9]||(t[9]=[s("新建文章")])),_:1},8,["onClick"])]),_:1},8,["option","table-loading","data","search","page","onSearchChange","onSearchReset","onCurrentChange","onSizeChange","onRefreshChange","onOnLoad"])])}const B=_(D,[["render",P]]);export{B as default};
