import{f as v}from"./order-DVkxiE3R.js";import{p as k}from"./date-CHAm-pjJ.js";import{h as L}from"./clipboard-cbcsrPdy.js";/* empty css              *//* empty css                    */import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as d,e as n,w as o,f as l,h,p as T,k as u,d as i,t as g,F as I,n as N,m as V}from"./index-CRB7mnJR.js";const q={name:"ForwardingOrderList",data(){return{search:{gmtCreateTime:[],gmtPaySuccess:[]},data:[],wlList:[],wlVisible:!1,wlInfo:{},loading:!1,purchaseId:"",query:{},page:{pageSize:10,currentPage:1,total:0},option:{searchSpan:6,searchMenuSpan:24,searchMenuPosition:"right",menuWidth:200,searchLabelWidth:100,menuAlign:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"订单ID",prop:"id"},{label:"用户昵称",prop:"nickName"},{label:"用户ID",prop:"userId",search:!0},{label:"用户编码",prop:"userNo",search:!0},{label:"物流信息",prop:"trackingNumber",search:!0,html:!0,formatter:e=>`<div>物流公司:${e.logisticsCompany===""?"--":e.logisticsCompany}</div><div>物流单号:${e.logisticsNumber||"--"}</div>`},{label:"订单状态",prop:"status",searchClearable:!0,search:!0,type:"select",dicData:[{label:"已录入",value:0},{label:"已QC",value:1},{label:"已发货",value:2},{label:"已完成",value:3},{label:"退货",value:4},{label:"已取消",value:-1}],align:"center",formatter:e=>e.statusDesc},{label:"创建时间",prop:"gmtCreate",width:90,type:"daterange",searchRange:!0,valueFormat:"yyyy-MM-dd HH:mm:ss",defaultTime:["00:00:00","23:59:59"],pickerOptions:k,formatter:e=>e.gmtCreate}]}}},created(){this.onLoad(this.page,this.query)},methods:{handleClick(){this.page.currentPage=1,this.query.status=this.search.orderStatus,this.onLoad(this.page,this.query)},searchChange(e,t){e.gmtCreateTime&&e.gmtCreateTime.length?(e.startGmtCreateTime=e.gmtCreateTime[0],e.endGmtCreateTime=e.gmtCreateTime[1]):(delete e.startGmtCreateTime,delete e.endGmtCreateTime),this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},searchReset(){this.search.status="",this.query={status:""},this.page.currentPage=1,this.onLoad(this.page,this.query)},refreshChange(){this.onLoad(this.page,this.query)},currentChange(e){this.page.currentPage=e,this.onLoad(this.page,this.query)},sizeChange(e){this.page.pageSize=e},onLoad(e,t={}){this.loading=!0;const m={pageNo:e.currentPage,pageSize:e.pageSize,...Object.assign(t,this.query)};v(m).then(c=>{console.log(c),this.page.total=c.total||0,this.data=c.data,console.log(1)}).finally(()=>{this.loading=!1})},toDetail(e){this.$router.push(`/order/forwarding-detail/${e}`)},finish(){this.refreshChange()},lookWl(e){this.wlInfo=e,this.wlVisible=!0,this.wlList=e.trackingList},closeWl(){this.wlInfo={}},copyTxt(e,t){L(t,e)}}},x={class:"basic-container"},z={key:0},P={class:"wl"},B={class:"wl-line"};function D(e,t,m,c,a,r){const f=l("el-button"),C=l("avue-crud"),_=l("el-card"),b=l("el-timeline-item"),y=l("el-timeline"),w=l("el-dialog");return h(),d("div",x,[n(C,{option:a.option,"table-loading":a.loading,data:a.data,search:a.search,page:a.page,rowKey:"orderId",onSearchChange:r.searchChange,onSearchReset:r.searchReset,onCurrentChange:r.currentChange,onSizeChange:r.sizeChange,onRefreshChange:r.refreshChange},{menu:o((s,p)=>[s.row.trackingList?(h(),d("div",z,[n(f,{type:"text",onClick:R=>r.lookWl(s.row)},{default:o(()=>t[2]||(t[2]=[u("查看物流")])),_:2},1032,["onClick"])])):T("",!0)]),_:1},8,["option","table-loading","data","search","page","onSearchChange","onSearchReset","onCurrentChange","onSizeChange","onRefreshChange"]),n(w,{modelValue:a.wlVisible,"onUpdate:modelValue":t[1]||(t[1]=s=>a.wlVisible=s),onClose:r.closeWl},{default:o(()=>[i("div",P,[t[3]||(t[3]=i("div",{class:"title"},"基本信息:",-1)),n(_,{shadow:"never"},{default:o(()=>[i("div",null,"物流名称："+g(a.wlInfo.logisticsCompany),1),i("div",null,[u(" 物流单号："+g(a.wlInfo.logisticsNumber)+" ",1),i("i",{class:"el-icon-copy-document",onClick:t[0]||(t[0]=s=>r.copyTxt(s,a.wlInfo.logisticsNumber)),style:{"font-size":"14px",color:"#1890ff"}})])]),_:1}),t[4]||(t[4]=i("div",{class:"title"},"物流详情:",-1)),i("div",B,[n(y,null,{default:o(()=>[(h(!0),d(I,null,N(a.wlList,(s,p)=>(h(),V(b,{key:p,timestamp:s.gmtTime},{default:o(()=>[u(g(s.logisticsDesc),1)]),_:2},1032,["timestamp"]))),128))]),_:1})])])]),_:1},8,["modelValue","onClose"])])}const A=S(q,[["render",D],["__scopeId","data-v-e123c6e6"]]);export{A as default};
