import{r as h,c as p,e as l,w as m,f as d,X as f,h as y}from"./index-CRB7mnJR.js";import{p as C}from"./date-CHAm-pjJ.js";/* empty css                    *//* empty css              */import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b=e=>h({url:"/admin/currency/list",method:"post",data:e}),S=e=>h({url:"/admin/currency/save",method:"post",data:e}),_=e=>h({url:"/admin/currency/delete?id="+e,method:"post"}),D={data(){return{rowId:null,form:{},search:{},loading:!0,query:{},page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:210,searchShow:!0,searchMenuSpan:6,span:24,tip:!1,dialogWidth:"30%",addBtn:!0,editBtn:!1,delBtn:!0,column:[{label:"汇率",prop:"rate",rules:[{required:!0,message:"请输入汇率",trigger:"blur"}]},{label:"汇率类型",prop:"currency",type:"select",rules:[{required:!0,message:"请选择汇率类型",trigger:"change"}],value:1,dicData:[{value:1,label:"USD"}]},{label:"汇率日期",prop:"addTime",search:!0,searchRange:!0,format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",pickerOptions:C,rules:[{required:!0,message:"请选择汇率日期",trigger:"change"}],formatter:e=>e.addTime}]},data:[],showEditPop:!1}},methods:{searchReset(){this.search={},this.query={},this.page.currentPage=1,this.page.pageSize=10,this.onLoad(this.page)},searchChange(e,a){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),a()},currentChange(e){this.page.currentPage=e},sizeChange(e){this.page.pageSize=e},refreshChange(){this.onLoad(this.page,this.query)},onLoad(e,a={}){this.loading=!0;const t={current:e.currentPage,size:e.pageSize,...Object.assign(a,this.query)};if(t.addTime&&t.addTime.length){const n=t.addTime.split(",");t.beginTime=n[0],t.endTime=n[1]}b(t).then(n=>{this.page.total=Number(n.total||0),this.data=n.data,this.loading=!1})},beforeOpen(e,a){this.form.addTime=f().format("YYYY-MM-DD HH:mm:ss"),console.log(this.form),e()},rowSave(e,a,t){S(e).then(()=>{a(),this.onLoad(this.page),this.$message({type:"success",message:"操作成功!"})},n=>{t()})},rowDel(e){this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>_({id:e.id})).then(()=>{this.onLoad(this.page),this.$message({type:"success",message:"操作成功!"})})}}},w={class:"basic-container"};function v(e,a,t,n,r,o){const u=d("el-input-number"),c=d("el-date-picker"),g=d("avue-crud");return y(),p("div",w,[l(g,{option:r.option,"table-loading":r.loading,data:r.data,ref:"crud",modelValue:r.form,"onUpdate:modelValue":a[2]||(a[2]=s=>r.form=s),search:r.search,page:r.page,onRowSave:o.rowSave,onRowDel:o.rowDel,"before-open":o.beforeOpen,onSearchChange:o.searchChange,onSearchReset:o.searchReset,onCurrentChange:o.currentChange,onSizeChange:o.sizeChange,onRefreshChange:o.refreshChange,onOnLoad:o.onLoad},{"rate-form":m(({type:s})=>[l(u,{modelValue:r.form.rate,"onUpdate:modelValue":a[0]||(a[0]=i=>r.form.rate=i),precision:4,style:{width:"100%"},controls:!1,min:0,placeholder:"请输入汇率"},null,8,["modelValue"])]),"addTime-form":m(({type:s})=>[l(c,{modelValue:r.form.addTime,"onUpdate:modelValue":a[1]||(a[1]=i=>r.form.addTime=i),type:"datetime",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1},8,["option","table-loading","data","modelValue","search","page","onRowSave","onRowDel","before-open","onSearchChange","onSearchReset","onCurrentChange","onSizeChange","onRefreshChange","onOnLoad"])])}const V=Y(D,[["render",v]]);export{V as default};
